FHI_PSL_init = {
	set_country_flag = FHI_PSL_law
	set_country_flag = heresy_not_prosecuted
	set_country_flag = mandate_required
	set_country_flag = anti_terrorism
}

FHI_PSL_sign = {
	if = {
		limit = {
			NOT = { has_country_flag = FHI_PSL_law_signed }
		}
		set_country_flag = FHI_PSL_law_signed
	}
	else = {
		clr_country_flag = FHI_PSL_law_signed
	}
}

FHI_PSL_1_effect = {
	if = {
		limit = {
			has_country_flag = anti_terrorism
		}
		clr_country_flag = anti_terrorism
		clr_country_flag = anti_dissent
		set_country_flag = anti_extremism
	}
	else_if = {
		limit = {
			has_country_flag = anti_extremism
		}
		clr_country_flag = anti_extremism
		clr_country_flag = anti_terrorism
		set_country_flag = anti_dissent
	}
	else = {
		clr_country_flag = anti_dissent
		clr_country_flag = anti_extremism
		set_country_flag = anti_terrorism
	}
}

FHI_PSL_1_fake_effect = {
	if = {
		limit = {
			has_country_flag = anti_terrorism
		}
		add_popularity = {
			ideology = democracy
			popularity = 0.05
		}
		add_popularity = {
			ideology = supremacism
			popularity = -0.05
		}
		add_political_power = 25
	}
	else_if = {
		limit = {
			has_country_flag = anti_extremism
		}
		add_popularity = {
			ideology = supremacism
			popularity = -0.025
		}
		add_political_power = 25
	}
	else = {
		add_popularity = {
			ideology = despotism
			popularity = 0.05
		}
		add_popularity = {
			ideology = supremacism
			popularity = -0.05
		}
	}
}

FHI_PSL_2_effect = {
	if = {
		limit = {
			has_country_flag = heresy_not_prosecuted
		}
		clr_country_flag = heresy_not_prosecuted
		set_country_flag = heresy_prosecuted
	}
	else = {
		clr_country_flag = heresy_prosecuted
		set_country_flag = heresy_not_prosecuted
	}
}

FHI_PSL_2_fake_effect = {
	if = {
		limit = {
			has_country_flag = heresy_not_prosecuted
		}
		add_popularity = {
			ideology = democracy
			popularity = 0.025
		}
	}
	else = {
		add_popularity = {
			ideology = theocracy
			popularity = 0.05
		}
		add_political_power = -25
		unlock_decision_tooltip = FHI_Prosecute_Heresy
	}
}

FHI_PSL_4_effect = {
	if = {
		limit = {
			has_country_flag = mandate_not_required
		}
		clr_country_flag = mandate_not_required
		set_country_flag = mandate_required
	}
	else = {
		clr_country_flag = mandate_required
		set_country_flag = mandate_not_required
	}
}

FHI_PSL_4_fake_effect = {
	if = {
		limit = {
			has_country_flag = mandate_not_required
		}
		add_popularity = {
			ideology = despotism
			popularity = 0.05
			unlock_decision_tooltip = FHI_Arrest_Opponents_without_Mandate
		}
	}
	else = {
		add_popularity = {
			ideology = democracy
			popularity = 0.025
		}
		add_political_power = 25
	}
}

FHI_PSL_fake_effect = {
	if = {
		limit = {
			has_country_flag = anti_terrorism
		}
		add_popularity = {
			ideology = democracy
			popularity = 0.05
		}
		add_popularity = {
			ideology = supremacism
			popularity = -0.05
		}
		add_political_power = 25
	}
	else_if = {
		limit = {
			has_country_flag = anti_extremism
		}
		add_popularity = {
			ideology = supremacism
			popularity = -0.025
		}
		add_political_power = 25
	}
	else = {
		add_popularity = {
			ideology = despotism
			popularity = 0.05
		}
		add_popularity = {
			ideology = supremacism
			popularity = -0.05
		}
	}
	if = {
		limit = {
			has_country_flag = heresy_not_prosecuted
		}
		add_popularity = {
			ideology = democracy
			popularity = 0.025
		}
	}
	else = {
		add_popularity = {
			ideology = theocracy
			popularity = 0.05
		}
		add_political_power = -25
		unlock_decision_tooltip = FHI_Prosecute_Heresy
	}
	if = {
		limit = {
			has_country_flag = mandate_not_required
		}
		add_popularity = {
			ideology = despotism
			popularity = 0.05
		}
		unlock_decision_tooltip = FHI_Arrest_Opponents_without_Mandate
	}
	else = {
		add_popularity = {
			ideology = democracy
			popularity = 0.025
		}
		add_political_power = 25
	}
}

FHI_PSL_close = {
	clr_country_flag = FHI_PSL_law
	clr_country_flag = FHI_PSL_law_signed
	FHI_PSL_fake_effect = yes
}
FHI_PSL_close_and_clear = {
	clr_country_flag = FHI_PSL_law
	clr_country_flag = FHI_PSL_law_signed
	clr_country_flag = heresy_prosecuted
	clr_country_flag = heresy_not_prosecuted
	clr_country_flag = mandate_not_required
	clr_country_flag = mandate_required
	clr_country_flag = anti_dissent
	clr_country_flag = anti_extremism
	clr_country_flag = anti_terrorism
}